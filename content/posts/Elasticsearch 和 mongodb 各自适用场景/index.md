---
title: Elasticsearch 和 MongoDB 各自适用场景
date: 2021-11-13
tags:
  - Elasticsearch
  - MongoDB
categories:
  - 数据库
---

![elem1.jpg](1632578216864-67f2c0a1-d5f4-46ca-b585-0b93020432b3.jpeg)

来源于 《记十亿级 Es 数据迁移 mongodb 成本节省及性能优化实践》，详细说明可查看原文

### 8 字段以上的随机组合查询

有些业务场景，查询条件是由用户触发，查询条件不固定，可能存在多个字段的随机组合查询。mongodb 和 mysql 等数据库，都需要手动创建索引，由于 8 字段以上的随机组合查询情况种类太多，因此很难手动建索引覆盖所有场景，所以选择 Es 更优，只是成本会更高。

### 全文检索

虽然 mongodb 也支持全文检索，mongodb-4.2 以下版本全文检索能力性能和 ES 没法比，建议全文检索适用 Es。

mongodb-4.2 全文搜索已经开始支持 Lucene 引擎，可能性能会有很大提升，暂时没做研究，也没做性能对比，后续有空在研究。

### 其他复杂检索

例如：非前缀模糊匹配查询 `db.member.find({"name":{ $regex:/XXX/ }})`，查询 name 字段包含 XXX 的查询，这类查询 Es 更优，因为 mongodb、mysql 等底层都是 KV 存储，查找 KEY 的时候都是从左到右比较 key 字符串，如果是非前缀匹配模糊查询，就需要全表扫描。

查询以某字段为开头的文档，`db.member.find({"name":{$regex:/^XXX/}})` 这类就比较适合用 mongodb 查询，前缀匹配。

### 总结

- 没有万能的数据库，切记结合自身业务场景，选择最优数据库
- 主流数据库都有其存在的理由，不要因为在某些场景不适合而全盘否定该数据库其他层面的优势。例如不能因为 mongodb 在全文检索等复杂检索上面的弱势而全面否定 mongodb，也不能因为 Es 在磁盘成本、高并发读写等方面的劣势而否定 Es 在复杂检索上面的优势
- 切记以偏概全，捧一个踩一个，这都是及其不客观的行为

> 作者：杨亚洲(mongodb)
> 原文：<https://zhuanlan.zhihu.com/p/373351625>
